{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/KerjaanAsi/odoo/odoo-portal/components/auth/protected-route.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport type React from \"react\";\r\n\r\nimport { useAuth } from \"@/lib/auth.context\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect } from \"react\";\r\n\r\ninterface ProtectedRouteProps {\r\n  children: React.ReactNode;\r\n  allowedRoles?: string[];\r\n}\r\n\r\nexport function ProtectedRoute({\r\n  children,\r\n  allowedRoles,\r\n}: ProtectedRouteProps) {\r\n  const { user, isLoading } = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && !user) {\r\n      router.push(\"/admin/login\");\r\n    } else if (\r\n      !isLoading &&\r\n      user &&\r\n      allowedRoles &&\r\n      !allowedRoles.includes(user.role)\r\n    ) {\r\n      router.push(\"/admin/unauthorized\");\r\n    }\r\n  }, [user, isLoading, allowedRoles, router]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        Loading...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  if (allowedRoles && !allowedRoles.includes(user.role)) {\r\n    return null;\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;;AAIA;AACA;AACA;;;AANA;;;;AAaO,SAAS,eAAe,EAC7B,QAAQ,EACR,YAAY,EACQ;;IACpB,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,IAAA,qIAAO;IACnC,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,aAAa,CAAC,MAAM;gBACvB,OAAO,IAAI,CAAC;YACd,OAAO,IACL,CAAC,aACD,QACA,gBACA,CAAC,aAAa,QAAQ,CAAC,KAAK,IAAI,GAChC;gBACA,OAAO,IAAI,CAAC;YACd;QACF;mCAAG;QAAC;QAAM;QAAW;QAAc;KAAO;IAE1C,IAAI,WAAW;QACb,qBACE,6LAAC;YAAI,WAAU;sBAAgD;;;;;;IAInE;IAEA,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,IAAI,gBAAgB,CAAC,aAAa,QAAQ,CAAC,KAAK,IAAI,GAAG;QACrD,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ;GArCgB;;QAIc,qIAAO;QACpB,kJAAS;;;KALV"}}]
}